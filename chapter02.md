# 2장 디렉터리 다루기
### 학습목표

### 중요 개념
* 2.1 개요 : 리눅스 파일의 구분, 파일의 구성, 디렉터리 관리 함수
* 2.2 리눅스 파일의 특징 : 
* 2.3 디렉터리 생서과 삭제 : 
* 2.4 디렉터리 관리 : 
* 2.5 디렉터리 내용 읽기 : 

## 예제 명세
### 2.1 개요
* 000 : ...
* 000 : ...
### 2.2 리눅스 파일의 특징
* 000 : ...
* 000 : ...
### 2.3 디렉터리 생성과 삭제
* 000 : ...
* 000 : ...
### 2.4 디렉터리 관리
* 000 : ...
* 000 : ...
### 2.5 디렉터리 내용 읽기
* 000 : ...
* 000 : ...

## 2.1 개요
### 디렉터리
* 리눅스에서는 디렉터리를 파일의 한 종류로 취급함
* 리눅스 파일의 구분
    * 일반 파일(regular file) : 텍스트 파일, 실행 파일 등 텍스트나 바이너리 형태의 데이터를 저장하고 있는 파일
    * 특수 파일(special file) : 장치를 구동하는데 사용되는 파일-'장치 파일(devoce file)'이라고도 함
    * 디렉터리 : 해당 디렉터리에 속한 파일을 관리하는 특별한 파일
* 디렉터리의 구성
    * 하위 디렉터리
    * 하위 파일
### 파일의 구성
* 파일명 : 사용자가 파일에 접근할 때 이용
* inode : '데이터 블록'의 위치를 나타내는 주소들이 저장되어 있음
    * 외부적으로는 변호로 표시됨
    * **디렉터리에는 디렉터리에 속한 파일의 inode 번호와 이에 매핑된 파일명 목록이 들어 있음**
* 데이터 블록 : 실제로 데이터가 저장되는 하드디스크의 공간
    * 파일 소유자, 크기 등의 정보와 **실제 데이터를 저장**하고 있음
### 디렉터리 관리 함수
* 디렉터리 생성 : mkdir(2)
* 디렉터리 삭제 : rmdir(2)
* 현재 위치 확인 : getcwd(3), get_current_dir_name(3)
* 디렉터리명 변경 : rename(2)
* 디렉터리 이동 : chdir(2), fchdir(2)
* 디렉터리 열기 : opendir(3)
* 디렉터리 닫기 : closedir(3)
* 디렉터리 내용 읽기 : readdir(3)
* 디렉터리 오프셋 : telldir(3), seekdir(3), rewinddir(3)

## 2.2 리눅스 파일의 특징
### 개요
* 리눅스 파일의 이용 : 데이터 저장, 장치 구동, 프로세스간 통신 등에 이용됨
* 디렉터리 이해를 위해 리눅스 파일의 종류와 구성 요소에 대해 알아봄
### 2.1 파일의 종류
#### 파일의 구분
* 일반 파일
* 특수 파일(장치 파일)
* 디렉터리
#### 일반 파일
* 일반 파일 : 텍스트 파일, 실행 파일, 라이브러리, 이미지 등 대부분의 파일이 일반 파일에 해당됨
    * 데이터 블록에 텍스트 또는 바이너리 형태의 데이터를 저장함
    * vi등 편집기를 이용해 만들거나 컴파일러 또는 다른 응용 프로그램에서 생성할 수도 있음
#### 특수 파일
* 특수 파일 : 리눅스에서 통신을 하거나 터미널 또는 디스크 등의 장치를 사용할 때 관련된 특수 파일을 이용해야 함
* 장치 파일 : 장치 관련 특수 파일을 다른파일과 구분하여 장치파일이라고도 함
    * 장치 파일은 **데이터 블록을 이용하지 않음**(데이터 블록에 정보를 직접 저장하지 않고 inode에 장치 관련 정보를 저장하여 간접적으로 이용함)
    * 블록 장치(block device)
        * '블록 단위'로 데이터를 읽고 씀
        * 블록 크기(block size) : 1-8KB 범위에서 조정 가능
    * 문자 장치(character device)
        * '로우 디바이스(*\*raw* device)'라고도 함
            * \*raw : 가공하지 않은, 날것의
        * 하드디스크의 경우 섹터 단위(기본값 512KB)로 데이터를 읽고 씀
* 장치 번호
    * ls -l의 결과에서 나타남
    * 주 장치 번호(major device number)
        * 부 장치 번호 앞에 위치
        * 장치의 종류를 나타냄
    * 부 장치 번호(minor device number)
        * 주 장치 번호 뒤에 위치
        * 장치의 개체 번호를 의미
    * 기본적인 장치 파일은 처음 리눅스를 설치할 때 생성됨
    * 추가로 장착하는 장치의 장치 파일은 장치 추가 절차에 따라 생성됨
#### 디렉터리
* 리눅스에서는 **디렉터리도 파일로 취급**함(리눅스 파일의 종류를 분류할 때 디렉터리가 있었음)
* 디렉터리와 연관된 데이터 블록에는 해당 디렉터리에 속한 파일의 목록과 inode를 저장함('디렉터리의 데이터 블록에 하위 파일의 데이터 블록의 주소(inode)가 저장됨')
#### 파일 종류 식별 문자
* '-' : 일반 파일
* 'd' : 디렉터리
* 'b' : 블록 장치 특수 파일
* 'c' : 문자 장치 특수 파일
* 'l' : 심벌릭 링크
### 2.2 파일의 구성 요소
#### 파일명
* 파일명
    * 사용자가 파일에 접근할 때 사용
    * 파일명과 관련된 inode가 반드시 있어야 함
* 파일명 작성 규칙
    * 파일명 길이
        * 이전 : 최대 14자
        * 현재 : 최대 255바이트(단, 리눅스의 경우 255바이트 이상도 가능)
    * 사용 불가 문자
        * '/' : 디렉터리 계층을 구분
        * null문자 : 경로 이름의 끝을 나타냄
        * 출력이 가능한 문자 사용
        * 가능한 특수문자 사용 자제
    * 그 외 규칙
        * 알파벳 대소문자를 구별한다.
        * '.'으로 시작하는 파일(파일과 디렉터리)은 숨김 파일로 간주한다.
#### inode
* inode
    * 파일에 대한 정보를 저장하고 있는 객체
    * 실제로 디스크(데이터 블록)에 저장되어 있음('디렉터리의 데이터 블록에 하위 파일의 inode가 저장되어 있음')
    * 외부적으로는 번호로 표현
    * 내부적으로는 두 부분으로 나누어 정보를 저장함(파일 정보, 데이터블록 주소)
* 파일에 관한 정보
    * 파일 종류, 접근 권한, 크기, 소유자, 소유 그룹, 변경 시각, 하드 링크 수, 데이터 블록 수 등
    * ls -l은 inode의 정보를 읽어서 출력함
* 데이터 블록의 주소
    * ls -i 명령으로 조회
#### 데이터 블록
* 데이터 블록
    * 실제로 데이터가 저장되는 하드 디스크의 공간
    * 일반 파일, 디렉터리, 심벌릭 링크는 데이터 블록에 관련 정보를 '직접' 저장함
    * 장치 파일은 데이터 블록을 사용하지 않고(직접 사용하지 않고) 장치에 관한 정보를 inode에 저장함(inode 또한 실제로 디스크에 저장되어 있으므로 간접적으로 사용함)